"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/checkout/stripe/route";
exports.ids = ["app/api/checkout/stripe/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Fstripe%2Froute&page=%2Fapi%2Fcheckout%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Fstripe%2Froute&page=%2Fapi%2Fcheckout%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Sonat_Documents_VS_CODE_PROJECTS_PAY_STRUCTURE_ALL_PAY_STRUCTURE_app_api_checkout_stripe_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/checkout/stripe/route.ts */ \"(rsc)/./app/api/checkout/stripe/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/checkout/stripe/route\",\n        pathname: \"/api/checkout/stripe\",\n        filename: \"route\",\n        bundlePath: \"app/api/checkout/stripe/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Sonat\\\\Documents\\\\VS-CODE-PROJECTS\\\\PAY-STRUCTURE-ALL\\\\PAY-STRUCTURE\\\\app\\\\api\\\\checkout\\\\stripe\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Sonat_Documents_VS_CODE_PROJECTS_PAY_STRUCTURE_ALL_PAY_STRUCTURE_app_api_checkout_stripe_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/checkout/stripe/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGVja291dCUyRnN0cmlwZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2hlY2tvdXQlMkZzdHJpcGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjaGVja291dCUyRnN0cmlwZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNTb25hdCU1Q0RvY3VtZW50cyU1Q1ZTLUNPREUtUFJPSkVDVFMlNUNQQVktU1RSVUNUVVJFLUFMTCU1Q1BBWS1TVFJVQ1RVUkUlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1NvbmF0JTVDRG9jdW1lbnRzJTVDVlMtQ09ERS1QUk9KRUNUUyU1Q1BBWS1TVFJVQ1RVUkUtQUxMJTVDUEFZLVNUUlVDVFVSRSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDcUU7QUFDbEo7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb25lbGl4YS8/ZDMyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxTb25hdFxcXFxEb2N1bWVudHNcXFxcVlMtQ09ERS1QUk9KRUNUU1xcXFxQQVktU1RSVUNUVVJFLUFMTFxcXFxQQVktU1RSVUNUVVJFXFxcXGFwcFxcXFxhcGlcXFxcY2hlY2tvdXRcXFxcc3RyaXBlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGVja291dC9zdHJpcGUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGVja291dC9zdHJpcGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoZWNrb3V0L3N0cmlwZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFNvbmF0XFxcXERvY3VtZW50c1xcXFxWUy1DT0RFLVBST0pFQ1RTXFxcXFBBWS1TVFJVQ1RVUkUtQUxMXFxcXFBBWS1TVFJVQ1RVUkVcXFxcYXBwXFxcXGFwaVxcXFxjaGVja291dFxcXFxzdHJpcGVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NoZWNrb3V0L3N0cmlwZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Fstripe%2Froute&page=%2Fapi%2Fcheckout%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/checkout/stripe/route.ts":
/*!******************************************!*\
  !*** ./app/api/checkout/stripe/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/admin */ \"(rsc)/./lib/supabase/admin.ts\");\n/* harmony import */ var _lib_payments__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/payments */ \"(rsc)/./lib/payments.ts\");\n\n\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { productId, customerEmail, customerId } = body;\n        if (!productId || !customerEmail) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        const { data: product, error: productError } = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"products\").select(\"*\").eq(\"id\", productId).eq(\"is_active\", true).single();\n        if (productError || !product) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Product not found\"\n            }, {\n                status: 404\n            });\n        }\n        const settings = await (0,_lib_payments__WEBPACK_IMPORTED_MODULE_2__.getPaymentSettings)();\n        if (!settings.stripeEnabled) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Stripe is not enabled\"\n            }, {\n                status: 400\n            });\n        }\n        const baseUrl = \"http://localhost:3000\" || 0;\n        const session = await (0,_lib_payments__WEBPACK_IMPORTED_MODULE_2__.createCheckoutSession)({\n            product: product,\n            customer: {\n                id: customerId,\n                email: customerEmail\n            },\n            provider: \"stripe\",\n            successUrl: `${baseUrl}/success`,\n            cancelUrl: `${baseUrl}/cancel`\n        });\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Failed to create checkout session\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            sessionId: session.id,\n            url: session.url\n        });\n    } catch (error) {\n        console.error(\"Stripe checkout error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || \"Checkout failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoZWNrb3V0L3N0cmlwZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQ0g7QUFDc0I7QUFHcEUsZUFBZUksS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUMvQixNQUFNLEVBQUVDLFNBQVMsRUFBRUMsYUFBYSxFQUFFQyxVQUFVLEVBQUUsR0FBR0o7UUFFakQsSUFBSSxDQUFDRSxhQUFhLENBQUNDLGVBQWU7WUFDaEMsT0FBT1QscURBQVlBLENBQUNPLElBQUksQ0FDdEI7Z0JBQUVJLFNBQVM7Z0JBQU9DLE9BQU87WUFBMEIsR0FDbkQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU0sRUFBRUMsTUFBTUMsT0FBTyxFQUFFSCxPQUFPSSxZQUFZLEVBQUUsR0FBRyxNQUFNZiw4REFBYUEsQ0FDL0RnQixJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxNQUFNWCxXQUNUVyxFQUFFLENBQUMsYUFBYSxNQUNoQkMsTUFBTTtRQUVULElBQUlKLGdCQUFnQixDQUFDRCxTQUFTO1lBQzVCLE9BQU9mLHFEQUFZQSxDQUFDTyxJQUFJLENBQ3RCO2dCQUFFSSxTQUFTO2dCQUFPQyxPQUFPO1lBQW9CLEdBQzdDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNUSxXQUFXLE1BQU1sQixpRUFBa0JBO1FBQ3pDLElBQUksQ0FBQ2tCLFNBQVNDLGFBQWEsRUFBRTtZQUMzQixPQUFPdEIscURBQVlBLENBQUNPLElBQUksQ0FDdEI7Z0JBQUVJLFNBQVM7Z0JBQU9DLE9BQU87WUFBd0IsR0FDakQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1VLFVBQVVDLHVCQUErQixJQUFJO1FBRW5ELE1BQU1HLFVBQVUsTUFBTXpCLG9FQUFxQkEsQ0FBQztZQUMxQ2EsU0FBU0E7WUFDVGEsVUFBVTtnQkFDUkMsSUFBSW5CO2dCQUNKb0IsT0FBT3JCO1lBQ1Q7WUFDQXNCLFVBQVU7WUFDVkMsWUFBWSxDQUFDLEVBQUVULFFBQVEsUUFBUSxDQUFDO1lBQ2hDVSxXQUFXLENBQUMsRUFBRVYsUUFBUSxPQUFPLENBQUM7UUFDaEM7UUFFQSxJQUFJLENBQUNJLFNBQVM7WUFDWixPQUFPM0IscURBQVlBLENBQUNPLElBQUksQ0FDdEI7Z0JBQUVJLFNBQVM7Z0JBQU9DLE9BQU87WUFBb0MsR0FDN0Q7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU9iLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFDdkJJLFNBQVM7WUFDVHVCLFdBQVdQLFFBQVFFLEVBQUU7WUFDckJNLEtBQUtSLFFBQVFRLEdBQUc7UUFDbEI7SUFDRixFQUFFLE9BQU92QixPQUFZO1FBQ25Cd0IsUUFBUXhCLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9aLHFEQUFZQSxDQUFDTyxJQUFJLENBQ3RCO1lBQUVJLFNBQVM7WUFBT0MsT0FBT0EsTUFBTXlCLE9BQU8sSUFBSTtRQUFrQixHQUM1RDtZQUFFeEIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb25lbGl4YS8uL2FwcC9hcGkvY2hlY2tvdXQvc3RyaXBlL3JvdXRlLnRzPzBiZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9hZG1pbic7XG5pbXBvcnQgeyBjcmVhdGVDaGVja291dFNlc3Npb24sIGdldFBheW1lbnRTZXR0aW5ncyB9IGZyb20gJ0AvbGliL3BheW1lbnRzJztcbmltcG9ydCB0eXBlIHsgUHJvZHVjdCB9IGZyb20gJ0AvdHlwZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IHByb2R1Y3RJZCwgY3VzdG9tZXJFbWFpbCwgY3VzdG9tZXJJZCB9ID0gYm9keTtcblxuICAgIGlmICghcHJvZHVjdElkIHx8ICFjdXN0b21lckVtYWlsKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IHByb2R1Y3QsIGVycm9yOiBwcm9kdWN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpXG4gICAgICAuZXEoJ2lzX2FjdGl2ZScsIHRydWUpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAocHJvZHVjdEVycm9yIHx8ICFwcm9kdWN0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUHJvZHVjdCBub3QgZm91bmQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGdldFBheW1lbnRTZXR0aW5ncygpO1xuICAgIGlmICghc2V0dGluZ3Muc3RyaXBlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1N0cmlwZSBpcyBub3QgZW5hYmxlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbih7XG4gICAgICBwcm9kdWN0OiBwcm9kdWN0IGFzIFByb2R1Y3QsXG4gICAgICBjdXN0b21lcjoge1xuICAgICAgICBpZDogY3VzdG9tZXJJZCxcbiAgICAgICAgZW1haWw6IGN1c3RvbWVyRW1haWwsXG4gICAgICB9LFxuICAgICAgcHJvdmlkZXI6ICdzdHJpcGUnLFxuICAgICAgc3VjY2Vzc1VybDogYCR7YmFzZVVybH0vc3VjY2Vzc2AsXG4gICAgICBjYW5jZWxVcmw6IGAke2Jhc2VVcmx9L2NhbmNlbGAsXG4gICAgfSk7XG5cbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGNoZWNrb3V0IHNlc3Npb24nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbi5pZCxcbiAgICAgIHVybDogc2Vzc2lvbi51cmwsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdHJpcGUgY2hlY2tvdXQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdDaGVja291dCBmYWlsZWQnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzdXBhYmFzZUFkbWluIiwiY3JlYXRlQ2hlY2tvdXRTZXNzaW9uIiwiZ2V0UGF5bWVudFNldHRpbmdzIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsInByb2R1Y3RJZCIsImN1c3RvbWVyRW1haWwiLCJjdXN0b21lcklkIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwiZGF0YSIsInByb2R1Y3QiLCJwcm9kdWN0RXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJzZXR0aW5ncyIsInN0cmlwZUVuYWJsZWQiLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQUF9VUkwiLCJzZXNzaW9uIiwiY3VzdG9tZXIiLCJpZCIsImVtYWlsIiwicHJvdmlkZXIiLCJzdWNjZXNzVXJsIiwiY2FuY2VsVXJsIiwic2Vzc2lvbklkIiwidXJsIiwiY29uc29sZSIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/checkout/stripe/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/payments.ts":
/*!*************************!*\
  !*** ./lib/payments.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCheckoutSession: () => (/* binding */ createCheckoutSession),\n/* harmony export */   createOrder: () => (/* binding */ createOrder),\n/* harmony export */   getAvailableProviders: () => (/* binding */ getAvailableProviders),\n/* harmony export */   getPaymentSettings: () => (/* binding */ getPaymentSettings),\n/* harmony export */   updateOrderStatus: () => (/* binding */ updateOrderStatus)\n/* harmony export */ });\n/* harmony import */ var _supabase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase/admin */ \"(rsc)/./lib/supabase/admin.ts\");\n/* harmony import */ var _stripe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stripe */ \"(rsc)/./lib/stripe.ts\");\n/* harmony import */ var _paytr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./paytr */ \"(rsc)/./lib/paytr.ts\");\n\n\n\nasync function getPaymentSettings() {\n    const { data } = await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"settings\").select(\"key, value\").in(\"key\", [\n        \"default_payment_provider\",\n        \"stripe_enabled\",\n        \"paytr_enabled\",\n        \"allow_provider_switch\"\n    ]);\n    const settings = {};\n    data?.forEach((item)=>{\n        settings[item.key] = item.value;\n    });\n    return {\n        defaultProvider: settings.default_payment_provider || \"stripe\",\n        stripeEnabled: settings.stripe_enabled === \"true\",\n        paytrEnabled: settings.paytr_enabled === \"true\",\n        allowProviderSwitch: settings.allow_provider_switch === \"true\"\n    };\n}\nasync function createOrder(params) {\n    const { productId, customerId, customerEmail, amount, currency, provider, metadata } = params;\n    const { data, error } = await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"orders\").insert({\n        product_id: productId,\n        customer_id: customerId || null,\n        customer_email: customerEmail,\n        amount,\n        currency,\n        status: \"pending\",\n        payment_provider: provider,\n        metadata: metadata || {}\n    }).select().single();\n    if (error) throw error;\n    return data;\n}\nasync function createCheckoutSession(params) {\n    const { product, customer, provider, userIp, successUrl, cancelUrl } = params;\n    const order = await createOrder({\n        productId: product.id,\n        customerId: customer.id,\n        customerEmail: customer.email,\n        amount: product.price,\n        currency: product.currency,\n        provider\n    });\n    try {\n        if (provider === \"stripe\") {\n            const session = await (0,_stripe__WEBPACK_IMPORTED_MODULE_1__.createStripeCheckoutSession)({\n                product,\n                customerEmail: customer.email,\n                customerId: customer.id,\n                successUrl: `${successUrl}?order_id=${order.id}`,\n                cancelUrl: `${cancelUrl}?order_id=${order.id}`,\n                metadata: {\n                    order_id: order.id\n                }\n            });\n            await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"orders\").update({\n                provider_session_id: session.sessionId,\n                status: \"processing\"\n            }).eq(\"id\", order.id);\n            return {\n                id: session.sessionId,\n                url: session.url,\n                provider: \"stripe\",\n                productId: product.id,\n                customerId: customer.id,\n                customerEmail: customer.email,\n                amount: product.price,\n                currency: product.currency,\n                successUrl,\n                cancelUrl\n            };\n        }\n        if (provider === \"paytr\") {\n            if (!userIp) throw new Error(\"User IP required for PayTR\");\n            const session = await (0,_paytr__WEBPACK_IMPORTED_MODULE_2__.createPayTRCheckoutSession)({\n                product,\n                customer: {\n                    email: customer.email,\n                    name: customer.name || customer.email.split(\"@\")[0],\n                    phone: customer.phone,\n                    address: customer.address\n                },\n                orderId: order.id,\n                userIp,\n                successUrl: `${successUrl}?order_id=${order.id}`,\n                failUrl: `${cancelUrl}?order_id=${order.id}`\n            });\n            if (!session) {\n                await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"orders\").update({\n                    status: \"failed\"\n                }).eq(\"id\", order.id);\n                return null;\n            }\n            await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"orders\").update({\n                provider_session_id: session.token,\n                status: \"processing\"\n            }).eq(\"id\", order.id);\n            return {\n                id: session.token,\n                url: session.iframeUrl,\n                provider: \"paytr\",\n                productId: product.id,\n                customerId: customer.id,\n                customerEmail: customer.email,\n                amount: product.price,\n                currency: product.currency,\n                successUrl,\n                cancelUrl\n            };\n        }\n        throw new Error(\"Invalid payment provider\");\n    } catch (error) {\n        await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"orders\").update({\n            status: \"failed\"\n        }).eq(\"id\", order.id);\n        throw error;\n    }\n}\nasync function getAvailableProviders() {\n    const settings = await getPaymentSettings();\n    const providers = [];\n    if (settings.stripeEnabled) providers.push(\"stripe\");\n    if (settings.paytrEnabled) providers.push(\"paytr\");\n    return providers;\n}\nasync function updateOrderStatus(orderId, status, metadata) {\n    const updateData = {\n        status,\n        updated_at: new Date().toISOString()\n    };\n    if (metadata) {\n        const { data: order } = await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"orders\").select(\"metadata\").eq(\"id\", orderId).single();\n        updateData.metadata = {\n            ...order?.metadata,\n            ...metadata\n        };\n    }\n    await _supabase_admin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"orders\").update(updateData).eq(\"id\", orderId);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3JCcEIsVUFBVVksUUFBUVosUUFBUTtnQkFDMUJlO2dCQUNBQztZQUNGO1FBQ0Y7UUFFQSxNQUFNLElBQUlZLE1BQU07SUFDbEIsRUFBRSxPQUFPekIsT0FBTztRQUNkLE1BQU05QiwwREFBYUEsQ0FDaEJLLElBQUksQ0FBQyxVQUNMNkMsTUFBTSxDQUFDO1lBQUVmLFFBQVE7UUFBUyxHQUMxQmtCLEVBQUUsQ0FBQyxNQUFNVCxNQUFNQyxFQUFFO1FBRXBCLE1BQU1mO0lBQ1I7QUFDRjtBQUVPLGVBQWVrQztJQUNwQixNQUFNeEQsV0FBVyxNQUFNTDtJQUN2QixNQUFNOEQsWUFBK0IsRUFBRTtJQUV2QyxJQUFJekQsU0FBU08sYUFBYSxFQUFFa0QsVUFBVUMsSUFBSSxDQUFDO0lBQzNDLElBQUkxRCxTQUFTUyxZQUFZLEVBQUVnRCxVQUFVQyxJQUFJLENBQUM7SUFFMUMsT0FBT0Q7QUFDVDtBQUVPLGVBQWVFLGtCQUNwQlAsT0FBZSxFQUNmekIsTUFBdUIsRUFDdkJOLFFBQThCO0lBRTlCLE1BQU11QyxhQUFrQztRQUN0Q2pDO1FBQ0FrQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7SUFDcEM7SUFFQSxJQUFJMUMsVUFBVTtRQUNaLE1BQU0sRUFBRXpCLE1BQU13QyxLQUFLLEVBQUUsR0FBRyxNQUFNNUMsMERBQWFBLENBQ3hDSyxJQUFJLENBQUMsVUFDTEMsTUFBTSxDQUFDLFlBQ1ArQyxFQUFFLENBQUMsTUFBTU8sU0FDVHZCLE1BQU07UUFFVCtCLFdBQVd2QyxRQUFRLEdBQUc7WUFBRSxHQUFHZSxPQUFPZixRQUFRO1lBQUUsR0FBR0EsUUFBUTtRQUFDO0lBQzFEO0lBRUEsTUFBTTdCLDBEQUFhQSxDQUFDSyxJQUFJLENBQUMsVUFBVTZDLE1BQU0sQ0FBQ2tCLFlBQVlmLEVBQUUsQ0FBQyxNQUFNTztBQUNqRSIsInNvdXJjZXMiOlsid2VicGFjazovL21vbmVsaXhhLy4vbGliL3BheW1lbnRzLnRzP2EyNjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJy4vc3VwYWJhc2UvYWRtaW4nO1xuaW1wb3J0IHsgY3JlYXRlU3RyaXBlQ2hlY2tvdXRTZXNzaW9uIH0gZnJvbSAnLi9zdHJpcGUnO1xuaW1wb3J0IHsgY3JlYXRlUGF5VFJDaGVja291dFNlc3Npb24gfSBmcm9tICcuL3BheXRyJztcbmltcG9ydCB0eXBlIHsgUHJvZHVjdCwgT3JkZXIgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgUGF5bWVudFByb3ZpZGVyLCBDaGVja291dFNlc3Npb24gfSBmcm9tICdAL3R5cGVzL3BheW1lbnRzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnRTZXR0aW5ncygpIHtcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgLmZyb20oJ3NldHRpbmdzJylcbiAgICAuc2VsZWN0KCdrZXksIHZhbHVlJylcbiAgICAuaW4oJ2tleScsIFtcbiAgICAgICdkZWZhdWx0X3BheW1lbnRfcHJvdmlkZXInLFxuICAgICAgJ3N0cmlwZV9lbmFibGVkJyxcbiAgICAgICdwYXl0cl9lbmFibGVkJyxcbiAgICAgICdhbGxvd19wcm92aWRlcl9zd2l0Y2gnLFxuICAgIF0pO1xuXG4gIGNvbnN0IHNldHRpbmdzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIGRhdGE/LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBzZXR0aW5nc1tpdGVtLmtleV0gPSBpdGVtLnZhbHVlO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGRlZmF1bHRQcm92aWRlcjogKHNldHRpbmdzLmRlZmF1bHRfcGF5bWVudF9wcm92aWRlciB8fCAnc3RyaXBlJykgYXMgUGF5bWVudFByb3ZpZGVyLFxuICAgIHN0cmlwZUVuYWJsZWQ6IHNldHRpbmdzLnN0cmlwZV9lbmFibGVkID09PSAndHJ1ZScsXG4gICAgcGF5dHJFbmFibGVkOiBzZXR0aW5ncy5wYXl0cl9lbmFibGVkID09PSAndHJ1ZScsXG4gICAgYWxsb3dQcm92aWRlclN3aXRjaDogc2V0dGluZ3MuYWxsb3dfcHJvdmlkZXJfc3dpdGNoID09PSAndHJ1ZScsXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVPcmRlcihwYXJhbXM6IHtcbiAgcHJvZHVjdElkOiBzdHJpbmc7XG4gIGN1c3RvbWVySWQ/OiBzdHJpbmc7XG4gIGN1c3RvbWVyRW1haWw6IHN0cmluZztcbiAgYW1vdW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIHByb3ZpZGVyOiBQYXltZW50UHJvdmlkZXI7XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn0pOiBQcm9taXNlPE9yZGVyPiB7XG4gIGNvbnN0IHtcbiAgICBwcm9kdWN0SWQsXG4gICAgY3VzdG9tZXJJZCxcbiAgICBjdXN0b21lckVtYWlsLFxuICAgIGFtb3VudCxcbiAgICBjdXJyZW5jeSxcbiAgICBwcm92aWRlcixcbiAgICBtZXRhZGF0YSxcbiAgfSA9IHBhcmFtcztcblxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgLmZyb20oJ29yZGVycycpXG4gICAgLmluc2VydCh7XG4gICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SWQsXG4gICAgICBjdXN0b21lcl9pZDogY3VzdG9tZXJJZCB8fCBudWxsLFxuICAgICAgY3VzdG9tZXJfZW1haWw6IGN1c3RvbWVyRW1haWwsXG4gICAgICBhbW91bnQsXG4gICAgICBjdXJyZW5jeSxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgcGF5bWVudF9wcm92aWRlcjogcHJvdmlkZXIsXG4gICAgICBtZXRhZGF0YTogbWV0YWRhdGEgfHwge30sXG4gICAgfSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKCk7XG5cbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgcmV0dXJuIGRhdGEgYXMgT3JkZXI7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDaGVja291dFNlc3Npb24ocGFyYW1zOiB7XG4gIHByb2R1Y3Q6IFByb2R1Y3Q7XG4gIGN1c3RvbWVyOiB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIHBob25lPzogc3RyaW5nO1xuICAgIGFkZHJlc3M/OiBzdHJpbmc7XG4gIH07XG4gIHByb3ZpZGVyOiBQYXltZW50UHJvdmlkZXI7XG4gIHVzZXJJcD86IHN0cmluZztcbiAgc3VjY2Vzc1VybDogc3RyaW5nO1xuICBjYW5jZWxVcmw6IHN0cmluZztcbn0pOiBQcm9taXNlPENoZWNrb3V0U2Vzc2lvbiB8IG51bGw+IHtcbiAgY29uc3QgeyBwcm9kdWN0LCBjdXN0b21lciwgcHJvdmlkZXIsIHVzZXJJcCwgc3VjY2Vzc1VybCwgY2FuY2VsVXJsIH0gPSBwYXJhbXM7XG5cbiAgY29uc3Qgb3JkZXIgPSBhd2FpdCBjcmVhdGVPcmRlcih7XG4gICAgcHJvZHVjdElkOiBwcm9kdWN0LmlkLFxuICAgIGN1c3RvbWVySWQ6IGN1c3RvbWVyLmlkLFxuICAgIGN1c3RvbWVyRW1haWw6IGN1c3RvbWVyLmVtYWlsLFxuICAgIGFtb3VudDogcHJvZHVjdC5wcmljZSxcbiAgICBjdXJyZW5jeTogcHJvZHVjdC5jdXJyZW5jeSxcbiAgICBwcm92aWRlcixcbiAgfSk7XG5cbiAgdHJ5IHtcbiAgICBpZiAocHJvdmlkZXIgPT09ICdzdHJpcGUnKSB7XG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgY3JlYXRlU3RyaXBlQ2hlY2tvdXRTZXNzaW9uKHtcbiAgICAgICAgcHJvZHVjdCxcbiAgICAgICAgY3VzdG9tZXJFbWFpbDogY3VzdG9tZXIuZW1haWwsXG4gICAgICAgIGN1c3RvbWVySWQ6IGN1c3RvbWVyLmlkLFxuICAgICAgICBzdWNjZXNzVXJsOiBgJHtzdWNjZXNzVXJsfT9vcmRlcl9pZD0ke29yZGVyLmlkfWAsXG4gICAgICAgIGNhbmNlbFVybDogYCR7Y2FuY2VsVXJsfT9vcmRlcl9pZD0ke29yZGVyLmlkfWAsXG4gICAgICAgIG1ldGFkYXRhOiB7IG9yZGVyX2lkOiBvcmRlci5pZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgIHByb3ZpZGVyX3Nlc3Npb25faWQ6IHNlc3Npb24uc2Vzc2lvbklkLFxuICAgICAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLFxuICAgICAgICB9KVxuICAgICAgICAuZXEoJ2lkJywgb3JkZXIuaWQpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogc2Vzc2lvbi5zZXNzaW9uSWQsXG4gICAgICAgIHVybDogc2Vzc2lvbi51cmwsXG4gICAgICAgIHByb3ZpZGVyOiAnc3RyaXBlJyxcbiAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0LmlkLFxuICAgICAgICBjdXN0b21lcklkOiBjdXN0b21lci5pZCxcbiAgICAgICAgY3VzdG9tZXJFbWFpbDogY3VzdG9tZXIuZW1haWwsXG4gICAgICAgIGFtb3VudDogcHJvZHVjdC5wcmljZSxcbiAgICAgICAgY3VycmVuY3k6IHByb2R1Y3QuY3VycmVuY3ksXG4gICAgICAgIHN1Y2Nlc3NVcmwsXG4gICAgICAgIGNhbmNlbFVybCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHByb3ZpZGVyID09PSAncGF5dHInKSB7XG4gICAgICBpZiAoIXVzZXJJcCkgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElQIHJlcXVpcmVkIGZvciBQYXlUUicpO1xuXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgY3JlYXRlUGF5VFJDaGVja291dFNlc3Npb24oe1xuICAgICAgICBwcm9kdWN0LFxuICAgICAgICBjdXN0b21lcjoge1xuICAgICAgICAgIGVtYWlsOiBjdXN0b21lci5lbWFpbCxcbiAgICAgICAgICBuYW1lOiBjdXN0b21lci5uYW1lIHx8IGN1c3RvbWVyLmVtYWlsLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgcGhvbmU6IGN1c3RvbWVyLnBob25lLFxuICAgICAgICAgIGFkZHJlc3M6IGN1c3RvbWVyLmFkZHJlc3MsXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVySWQ6IG9yZGVyLmlkLFxuICAgICAgICB1c2VySXAsXG4gICAgICAgIHN1Y2Nlc3NVcmw6IGAke3N1Y2Nlc3NVcmx9P29yZGVyX2lkPSR7b3JkZXIuaWR9YCxcbiAgICAgICAgZmFpbFVybDogYCR7Y2FuY2VsVXJsfT9vcmRlcl9pZD0ke29yZGVyLmlkfWAsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgICAgICAudXBkYXRlKHsgc3RhdHVzOiAnZmFpbGVkJyB9KVxuICAgICAgICAgIC5lcSgnaWQnLCBvcmRlci5pZCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICBwcm92aWRlcl9zZXNzaW9uX2lkOiBzZXNzaW9uLnRva2VuLFxuICAgICAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLFxuICAgICAgICB9KVxuICAgICAgICAuZXEoJ2lkJywgb3JkZXIuaWQpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogc2Vzc2lvbi50b2tlbixcbiAgICAgICAgdXJsOiBzZXNzaW9uLmlmcmFtZVVybCxcbiAgICAgICAgcHJvdmlkZXI6ICdwYXl0cicsXG4gICAgICAgIHByb2R1Y3RJZDogcHJvZHVjdC5pZCxcbiAgICAgICAgY3VzdG9tZXJJZDogY3VzdG9tZXIuaWQsXG4gICAgICAgIGN1c3RvbWVyRW1haWw6IGN1c3RvbWVyLmVtYWlsLFxuICAgICAgICBhbW91bnQ6IHByb2R1Y3QucHJpY2UsXG4gICAgICAgIGN1cnJlbmN5OiBwcm9kdWN0LmN1cnJlbmN5LFxuICAgICAgICBzdWNjZXNzVXJsLFxuICAgICAgICBjYW5jZWxVcmwsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXltZW50IHByb3ZpZGVyJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAudXBkYXRlKHsgc3RhdHVzOiAnZmFpbGVkJyB9KVxuICAgICAgLmVxKCdpZCcsIG9yZGVyLmlkKTtcblxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdmFpbGFibGVQcm92aWRlcnMoKTogUHJvbWlzZTxQYXltZW50UHJvdmlkZXJbXT4ge1xuICBjb25zdCBzZXR0aW5ncyA9IGF3YWl0IGdldFBheW1lbnRTZXR0aW5ncygpO1xuICBjb25zdCBwcm92aWRlcnM6IFBheW1lbnRQcm92aWRlcltdID0gW107XG5cbiAgaWYgKHNldHRpbmdzLnN0cmlwZUVuYWJsZWQpIHByb3ZpZGVycy5wdXNoKCdzdHJpcGUnKTtcbiAgaWYgKHNldHRpbmdzLnBheXRyRW5hYmxlZCkgcHJvdmlkZXJzLnB1c2goJ3BheXRyJyk7XG5cbiAgcmV0dXJuIHByb3ZpZGVycztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU9yZGVyU3RhdHVzKFxuICBvcmRlcklkOiBzdHJpbmcsXG4gIHN0YXR1czogT3JkZXJbJ3N0YXR1cyddLFxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB1cGRhdGVEYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge1xuICAgIHN0YXR1cyxcbiAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG5cbiAgaWYgKG1ldGFkYXRhKSB7XG4gICAgY29uc3QgeyBkYXRhOiBvcmRlciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAuc2VsZWN0KCdtZXRhZGF0YScpXG4gICAgICAuZXEoJ2lkJywgb3JkZXJJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIHVwZGF0ZURhdGEubWV0YWRhdGEgPSB7IC4uLm9yZGVyPy5tZXRhZGF0YSwgLi4ubWV0YWRhdGEgfTtcbiAgfVxuXG4gIGF3YWl0IHN1cGFiYXNlQWRtaW4uZnJvbSgnb3JkZXJzJykudXBkYXRlKHVwZGF0ZURhdGEpLmVxKCdpZCcsIG9yZGVySWQpO1xufVxyXG4iXSwibmFtZXMiOlsic3VwYWJhc2VBZG1pbiIsImNyZWF0ZVN0cmlwZUNoZWNrb3V0U2Vzc2lvbiIsImNyZWF0ZVBheVRSQ2hlY2tvdXRTZXNzaW9uIiwiZ2V0UGF5bWVudFNldHRpbmdzIiwiZGF0YSIsImZyb20iLCJzZWxlY3QiLCJpbiIsInNldHRpbmdzIiwiZm9yRWFjaCIsIml0ZW0iLCJrZXkiLCJ2YWx1ZSIsImRlZmF1bHRQcm92aWRlciIsImRlZmF1bHRfcGF5bWVudF9wcm92aWRlciIsInN0cmlwZUVuYWJsZWQiLCJzdHJpcGVfZW5hYmxlZCIsInBheXRyRW5hYmxlZCIsInBheXRyX2VuYWJsZWQiLCJhbGxvd1Byb3ZpZGVyU3dpdGNoIiwiYWxsb3dfcHJvdmlkZXJfc3dpdGNoIiwiY3JlYXRlT3JkZXIiLCJwYXJhbXMiLCJwcm9kdWN0SWQiLCJjdXN0b21lcklkIiwiY3VzdG9tZXJFbWFpbCIsImFtb3VudCIsImN1cnJlbmN5IiwicHJvdmlkZXIiLCJtZXRhZGF0YSIsImVycm9yIiwiaW5zZXJ0IiwicHJvZHVjdF9pZCIsImN1c3RvbWVyX2lkIiwiY3VzdG9tZXJfZW1haWwiLCJzdGF0dXMiLCJwYXltZW50X3Byb3ZpZGVyIiwic2luZ2xlIiwiY3JlYXRlQ2hlY2tvdXRTZXNzaW9uIiwicHJvZHVjdCIsImN1c3RvbWVyIiwidXNlcklwIiwic3VjY2Vzc1VybCIsImNhbmNlbFVybCIsIm9yZGVyIiwiaWQiLCJlbWFpbCIsInByaWNlIiwic2Vzc2lvbiIsIm9yZGVyX2lkIiwidXBkYXRlIiwicHJvdmlkZXJfc2Vzc2lvbl9pZCIsInNlc3Npb25JZCIsImVxIiwidXJsIiwiRXJyb3IiLCJuYW1lIiwic3BsaXQiLCJwaG9uZSIsImFkZHJlc3MiLCJvcmRlcklkIiwiZmFpbFVybCIsInRva2VuIiwiaWZyYW1lVXJsIiwiZ2V0QXZhaWxhYmxlUHJvdmlkZXJzIiwicHJvdmlkZXJzIiwicHVzaCIsInVwZGF0ZU9yZGVyU3RhdHVzIiwidXBkYXRlRGF0YSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/payments.ts\n");

/***/ }),

/***/ "(rsc)/./lib/paytr.ts":
/*!**********************!*\
  !*** ./lib/paytr.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPayTRCheckoutSession: () => (/* binding */ createPayTRCheckoutSession),\n/* harmony export */   processPayTRCallback: () => (/* binding */ processPayTRCallback),\n/* harmony export */   verifyPayTRCallback: () => (/* binding */ verifyPayTRCallback)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _supabase_admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./supabase/admin */ \"(rsc)/./lib/supabase/admin.ts\");\n\n\nconst PAYTR_MERCHANT_ID = process.env.PAYTR_MERCHANT_ID;\nconst PAYTR_MERCHANT_KEY = process.env.PAYTR_MERCHANT_KEY;\nconst PAYTR_MERCHANT_SALT = process.env.PAYTR_MERCHANT_SALT;\nconst PAYTR_TEST_MODE = process.env.PAYTR_TEST_MODE === \"true\";\nconst PAYTR_API_URL = \"https://www.paytr.com/odeme/api/get-token\";\nfunction generatePayTRToken(params) {\n    const hashStr = PAYTR_MERCHANT_ID + params.email + params.paymentAmount + params.merchantOid + params.noInstallment + params.maxInstallment + params.currency + params.testMode + PAYTR_MERCHANT_SALT;\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHmac(\"sha256\", PAYTR_MERCHANT_KEY).update(hashStr).digest(\"base64\");\n}\nasync function createPayTRCheckoutSession(params) {\n    const { product, customer, orderId, userIp, successUrl, failUrl } = params;\n    const paymentAmount = Math.round(product.price * 100);\n    const basketItem = {\n        name: product.name,\n        price: (product.price * 100).toFixed(0),\n        quantity: 1\n    };\n    const userBasket = Buffer.from(JSON.stringify([\n        [\n            basketItem.name,\n            basketItem.price,\n            basketItem.quantity\n        ]\n    ])).toString(\"base64\");\n    const currencyMap = {\n        TRY: \"TL\",\n        USD: \"USD\",\n        EUR: \"EUR\"\n    };\n    const currency = currencyMap[product.currency] || \"TL\";\n    const testMode = PAYTR_TEST_MODE ? 1 : 0;\n    const paytrToken = generatePayTRToken({\n        merchantOid: orderId,\n        email: customer.email,\n        paymentAmount,\n        userBasket,\n        noInstallment: 1,\n        maxInstallment: 0,\n        currency,\n        testMode\n    });\n    const formData = new URLSearchParams({\n        merchant_id: PAYTR_MERCHANT_ID,\n        user_ip: userIp,\n        merchant_oid: orderId,\n        email: customer.email,\n        payment_amount: paymentAmount.toString(),\n        paytr_token: paytrToken,\n        user_basket: userBasket,\n        debug_on: \"1\",\n        no_installment: \"1\",\n        max_installment: \"0\",\n        user_name: customer.name,\n        user_address: customer.address || \"Turkiye\",\n        user_phone: customer.phone || \"05000000000\",\n        merchant_ok_url: successUrl,\n        merchant_fail_url: failUrl,\n        timeout_limit: \"30\",\n        currency,\n        test_mode: testMode.toString()\n    });\n    try {\n        const response = await fetch(PAYTR_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            body: formData.toString()\n        });\n        const result = await response.json();\n        if (result.status === \"success\" && result.token) {\n            return {\n                token: result.token,\n                iframeUrl: `https://www.paytr.com/odeme/guvenli/${result.token}`\n            };\n        }\n        console.error(\"PayTR token error:\", result.reason);\n        return null;\n    } catch (error) {\n        console.error(\"PayTR API error:\", error);\n        return null;\n    }\n}\nfunction verifyPayTRCallback(params) {\n    const { merchantOid, status, totalAmount, hash } = params;\n    const hashStr = merchantOid + PAYTR_MERCHANT_SALT + status + totalAmount;\n    const expectedHash = crypto__WEBPACK_IMPORTED_MODULE_0___default().createHmac(\"sha256\", PAYTR_MERCHANT_KEY).update(hashStr).digest(\"base64\");\n    return hash === expectedHash;\n}\nasync function processPayTRCallback(params) {\n    const { merchantOid, status, totalAmount, hash, failedReasonCode, failedReasonMsg } = params;\n    if (!verifyPayTRCallback({\n        merchantOid,\n        status,\n        totalAmount,\n        hash\n    })) {\n        throw new Error(\"Invalid PayTR hash\");\n    }\n    const isSuccess = status === \"success\";\n    const updateData = {\n        status: isSuccess ? \"completed\" : \"failed\",\n        updated_at: new Date().toISOString()\n    };\n    if (!isSuccess) {\n        updateData.metadata = {\n            paytr_error_code: failedReasonCode,\n            paytr_error_message: failedReasonMsg\n        };\n    }\n    await _supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"orders\").update(updateData).eq(\"id\", merchantOid);\n    return {\n        success: isSuccess,\n        orderId: merchantOid\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBU1g7SUFBWTtBQUNwRCIsInNvdXJjZXMiOlsid2VicGFjazovL21vbmVsaXhhLy4vbGliL3BheXRyLnRzP2VmOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJy4vc3VwYWJhc2UvYWRtaW4nO1xuaW1wb3J0IHR5cGUgeyBQcm9kdWN0IH0gZnJvbSAnQC90eXBlcyc7XG5cbmNvbnN0IFBBWVRSX01FUkNIQU5UX0lEID0gcHJvY2Vzcy5lbnYuUEFZVFJfTUVSQ0hBTlRfSUQhO1xuY29uc3QgUEFZVFJfTUVSQ0hBTlRfS0VZID0gcHJvY2Vzcy5lbnYuUEFZVFJfTUVSQ0hBTlRfS0VZITtcbmNvbnN0IFBBWVRSX01FUkNIQU5UX1NBTFQgPSBwcm9jZXNzLmVudi5QQVlUUl9NRVJDSEFOVF9TQUxUITtcbmNvbnN0IFBBWVRSX1RFU1RfTU9ERSA9IHByb2Nlc3MuZW52LlBBWVRSX1RFU1RfTU9ERSA9PT0gJ3RydWUnO1xuY29uc3QgUEFZVFJfQVBJX1VSTCA9ICdodHRwczovL3d3dy5wYXl0ci5jb20vb2RlbWUvYXBpL2dldC10b2tlbic7XG5cbmludGVyZmFjZSBQYXlUUkJhc2tldEl0ZW0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHByaWNlOiBzdHJpbmc7XG4gIHF1YW50aXR5OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBQYXlUUlRva2VuUmVzcG9uc2Uge1xuICBzdGF0dXM6ICdzdWNjZXNzJyB8ICdmYWlsZWQnO1xuICB0b2tlbj86IHN0cmluZztcbiAgcmVhc29uPzogc3RyaW5nO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVBheVRSVG9rZW4ocGFyYW1zOiB7XG4gIG1lcmNoYW50T2lkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBheW1lbnRBbW91bnQ6IG51bWJlcjtcbiAgdXNlckJhc2tldDogc3RyaW5nO1xuICBub0luc3RhbGxtZW50OiBudW1iZXI7XG4gIG1heEluc3RhbGxtZW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIHRlc3RNb2RlOiBudW1iZXI7XG59KTogc3RyaW5nIHtcbiAgY29uc3QgaGFzaFN0ciA9XG4gICAgUEFZVFJfTUVSQ0hBTlRfSUQgK1xuICAgIHBhcmFtcy5lbWFpbCArXG4gICAgcGFyYW1zLnBheW1lbnRBbW91bnQgK1xuICAgIHBhcmFtcy5tZXJjaGFudE9pZCArXG4gICAgcGFyYW1zLm5vSW5zdGFsbG1lbnQgK1xuICAgIHBhcmFtcy5tYXhJbnN0YWxsbWVudCArXG4gICAgcGFyYW1zLmN1cnJlbmN5ICtcbiAgICBwYXJhbXMudGVzdE1vZGUgK1xuICAgIFBBWVRSX01FUkNIQU5UX1NBTFQ7XG5cbiAgcmV0dXJuIGNyeXB0b1xuICAgIC5jcmVhdGVIbWFjKCdzaGEyNTYnLCBQQVlUUl9NRVJDSEFOVF9LRVkpXG4gICAgLnVwZGF0ZShoYXNoU3RyKVxuICAgIC5kaWdlc3QoJ2Jhc2U2NCcpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUGF5VFJDaGVja291dFNlc3Npb24ocGFyYW1zOiB7XG4gIHByb2R1Y3Q6IFByb2R1Y3Q7XG4gIGN1c3RvbWVyOiB7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGhvbmU/OiBzdHJpbmc7XG4gICAgYWRkcmVzcz86IHN0cmluZztcbiAgfTtcbiAgb3JkZXJJZDogc3RyaW5nO1xuICB1c2VySXA6IHN0cmluZztcbiAgc3VjY2Vzc1VybDogc3RyaW5nO1xuICBmYWlsVXJsOiBzdHJpbmc7XG59KTogUHJvbWlzZTx7IHRva2VuOiBzdHJpbmc7IGlmcmFtZVVybDogc3RyaW5nIH0gfCBudWxsPiB7XG4gIGNvbnN0IHsgcHJvZHVjdCwgY3VzdG9tZXIsIG9yZGVySWQsIHVzZXJJcCwgc3VjY2Vzc1VybCwgZmFpbFVybCB9ID0gcGFyYW1zO1xuXG4gIGNvbnN0IHBheW1lbnRBbW91bnQgPSBNYXRoLnJvdW5kKHByb2R1Y3QucHJpY2UgKiAxMDApO1xuXG4gIGNvbnN0IGJhc2tldEl0ZW06IFBheVRSQmFza2V0SXRlbSA9IHtcbiAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXG4gICAgcHJpY2U6IChwcm9kdWN0LnByaWNlICogMTAwKS50b0ZpeGVkKDApLFxuICAgIHF1YW50aXR5OiAxLFxuICB9O1xuXG4gIGNvbnN0IHVzZXJCYXNrZXQgPSBCdWZmZXIuZnJvbShcbiAgICBKU09OLnN0cmluZ2lmeShbW2Jhc2tldEl0ZW0ubmFtZSwgYmFza2V0SXRlbS5wcmljZSwgYmFza2V0SXRlbS5xdWFudGl0eV1dKVxuICApLnRvU3RyaW5nKCdiYXNlNjQnKTtcblxuICBjb25zdCBjdXJyZW5jeU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICBUUlk6ICdUTCcsXG4gICAgVVNEOiAnVVNEJyxcbiAgICBFVVI6ICdFVVInLFxuICB9O1xuICBjb25zdCBjdXJyZW5jeSA9IGN1cnJlbmN5TWFwW3Byb2R1Y3QuY3VycmVuY3ldIHx8ICdUTCc7XG4gIGNvbnN0IHRlc3RNb2RlID0gUEFZVFJfVEVTVF9NT0RFID8gMSA6IDA7XG5cbiAgY29uc3QgcGF5dHJUb2tlbiA9IGdlbmVyYXRlUGF5VFJUb2tlbih7XG4gICAgbWVyY2hhbnRPaWQ6IG9yZGVySWQsXG4gICAgZW1haWw6IGN1c3RvbWVyLmVtYWlsLFxuICAgIHBheW1lbnRBbW91bnQsXG4gICAgdXNlckJhc2tldCxcbiAgICBub0luc3RhbGxtZW50OiAxLFxuICAgIG1heEluc3RhbGxtZW50OiAwLFxuICAgIGN1cnJlbmN5LFxuICAgIHRlc3RNb2RlLFxuICB9KTtcblxuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgIG1lcmNoYW50X2lkOiBQQVlUUl9NRVJDSEFOVF9JRCxcbiAgICB1c2VyX2lwOiB1c2VySXAsXG4gICAgbWVyY2hhbnRfb2lkOiBvcmRlcklkLFxuICAgIGVtYWlsOiBjdXN0b21lci5lbWFpbCxcbiAgICBwYXltZW50X2Ftb3VudDogcGF5bWVudEFtb3VudC50b1N0cmluZygpLFxuICAgIHBheXRyX3Rva2VuOiBwYXl0clRva2VuLFxuICAgIHVzZXJfYmFza2V0OiB1c2VyQmFza2V0LFxuICAgIGRlYnVnX29uOiAnMScsXG4gICAgbm9faW5zdGFsbG1lbnQ6ICcxJyxcbiAgICBtYXhfaW5zdGFsbG1lbnQ6ICcwJyxcbiAgICB1c2VyX25hbWU6IGN1c3RvbWVyLm5hbWUsXG4gICAgdXNlcl9hZGRyZXNzOiBjdXN0b21lci5hZGRyZXNzIHx8ICdUdXJraXllJyxcbiAgICB1c2VyX3Bob25lOiBjdXN0b21lci5waG9uZSB8fCAnMDUwMDAwMDAwMDAnLFxuICAgIG1lcmNoYW50X29rX3VybDogc3VjY2Vzc1VybCxcbiAgICBtZXJjaGFudF9mYWlsX3VybDogZmFpbFVybCxcbiAgICB0aW1lb3V0X2xpbWl0OiAnMzAnLFxuICAgIGN1cnJlbmN5LFxuICAgIHRlc3RfbW9kZTogdGVzdE1vZGUudG9TdHJpbmcoKSxcbiAgfSk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFBBWVRSX0FQSV9VUkwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICB9LFxuICAgICAgYm9keTogZm9ybURhdGEudG9TdHJpbmcoKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3VsdDogUGF5VFJUb2tlblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdzdWNjZXNzJyAmJiByZXN1bHQudG9rZW4pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRva2VuOiByZXN1bHQudG9rZW4sXG4gICAgICAgIGlmcmFtZVVybDogYGh0dHBzOi8vd3d3LnBheXRyLmNvbS9vZGVtZS9ndXZlbmxpLyR7cmVzdWx0LnRva2VufWAsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IoJ1BheVRSIHRva2VuIGVycm9yOicsIHJlc3VsdC5yZWFzb24pO1xuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1BheVRSIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVBheVRSQ2FsbGJhY2socGFyYW1zOiB7XG4gIG1lcmNoYW50T2lkOiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICB0b3RhbEFtb3VudDogc3RyaW5nO1xuICBoYXNoOiBzdHJpbmc7XG59KTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgbWVyY2hhbnRPaWQsIHN0YXR1cywgdG90YWxBbW91bnQsIGhhc2ggfSA9IHBhcmFtcztcblxuICBjb25zdCBoYXNoU3RyID0gbWVyY2hhbnRPaWQgKyBQQVlUUl9NRVJDSEFOVF9TQUxUICsgc3RhdHVzICsgdG90YWxBbW91bnQ7XG4gIGNvbnN0IGV4cGVjdGVkSGFzaCA9IGNyeXB0b1xuICAgIC5jcmVhdGVIbWFjKCdzaGEyNTYnLCBQQVlUUl9NRVJDSEFOVF9LRVkpXG4gICAgLnVwZGF0ZShoYXNoU3RyKVxuICAgIC5kaWdlc3QoJ2Jhc2U2NCcpO1xuXG4gIHJldHVybiBoYXNoID09PSBleHBlY3RlZEhhc2g7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzUGF5VFJDYWxsYmFjayhwYXJhbXM6IHtcbiAgbWVyY2hhbnRPaWQ6IHN0cmluZztcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIHRvdGFsQW1vdW50OiBzdHJpbmc7XG4gIGhhc2g6IHN0cmluZztcbiAgZmFpbGVkUmVhc29uQ29kZT86IHN0cmluZztcbiAgZmFpbGVkUmVhc29uTXNnPzogc3RyaW5nO1xufSk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBvcmRlcklkOiBzdHJpbmcgfT4ge1xuICBjb25zdCB7XG4gICAgbWVyY2hhbnRPaWQsXG4gICAgc3RhdHVzLFxuICAgIHRvdGFsQW1vdW50LFxuICAgIGhhc2gsXG4gICAgZmFpbGVkUmVhc29uQ29kZSxcbiAgICBmYWlsZWRSZWFzb25Nc2csXG4gIH0gPSBwYXJhbXM7XG5cbiAgaWYgKCF2ZXJpZnlQYXlUUkNhbGxiYWNrKHsgbWVyY2hhbnRPaWQsIHN0YXR1cywgdG90YWxBbW91bnQsIGhhc2ggfSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgUGF5VFIgaGFzaCcpO1xuICB9XG5cbiAgY29uc3QgaXNTdWNjZXNzID0gc3RhdHVzID09PSAnc3VjY2Vzcyc7XG5cbiAgY29uc3QgdXBkYXRlRGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICBzdGF0dXM6IGlzU3VjY2VzcyA/ICdjb21wbGV0ZWQnIDogJ2ZhaWxlZCcsXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xuXG4gIGlmICghaXNTdWNjZXNzKSB7XG4gICAgdXBkYXRlRGF0YS5tZXRhZGF0YSA9IHtcbiAgICAgIHBheXRyX2Vycm9yX2NvZGU6IGZhaWxlZFJlYXNvbkNvZGUsXG4gICAgICBwYXl0cl9lcnJvcl9tZXNzYWdlOiBmYWlsZWRSZWFzb25Nc2csXG4gICAgfTtcbiAgfVxuXG4gIGF3YWl0IHN1cGFiYXNlQWRtaW4uZnJvbSgnb3JkZXJzJykudXBkYXRlKHVwZGF0ZURhdGEpLmVxKCdpZCcsIG1lcmNoYW50T2lkKTtcblxuICByZXR1cm4geyBzdWNjZXNzOiBpc1N1Y2Nlc3MsIG9yZGVySWQ6IG1lcmNoYW50T2lkIH07XG59XHJcbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJzdXBhYmFzZUFkbWluIiwiUEFZVFJfTUVSQ0hBTlRfSUQiLCJwcm9jZXNzIiwiZW52IiwiUEFZVFJfTUVSQ0hBTlRfS0VZIiwiUEFZVFJfTUVSQ0hBTlRfU0FMVCIsIlBBWVRSX1RFU1RfTU9ERSIsIlBBWVRSX0FQSV9VUkwiLCJnZW5lcmF0ZVBheVRSVG9rZW4iLCJwYXJhbXMiLCJoYXNoU3RyIiwiZW1haWwiLCJwYXltZW50QW1vdW50IiwibWVyY2hhbnRPaWQiLCJub0luc3RhbGxtZW50IiwibWF4SW5zdGFsbG1lbnQiLCJjdXJyZW5jeSIsInRlc3RNb2RlIiwiY3JlYXRlSG1hYyIsInVwZGF0ZSIsImRpZ2VzdCIsImNyZWF0ZVBheVRSQ2hlY2tvdXRTZXNzaW9uIiwicHJvZHVjdCIsImN1c3RvbWVyIiwib3JkZXJJZCIsInVzZXJJcCIsInN1Y2Nlc3NVcmwiLCJmYWlsVXJsIiwiTWF0aCIsInJvdW5kIiwicHJpY2UiLCJiYXNrZXRJdGVtIiwibmFtZSIsInRvRml4ZWQiLCJxdWFudGl0eSIsInVzZXJCYXNrZXQiLCJCdWZmZXIiLCJmcm9tIiwiSlNPTiIsInN0cmluZ2lmeSIsInRvU3RyaW5nIiwiY3VycmVuY3lNYXAiLCJUUlkiLCJVU0QiLCJFVVIiLCJwYXl0clRva2VuIiwiZm9ybURhdGEiLCJVUkxTZWFyY2hQYXJhbXMiLCJtZXJjaGFudF9pZCIsInVzZXJfaXAiLCJtZXJjaGFudF9vaWQiLCJwYXltZW50X2Ftb3VudCIsInBheXRyX3Rva2VuIiwidXNlcl9iYXNrZXQiLCJkZWJ1Z19vbiIsIm5vX2luc3RhbGxtZW50IiwibWF4X2luc3RhbGxtZW50IiwidXNlcl9uYW1lIiwidXNlcl9hZGRyZXNzIiwiYWRkcmVzcyIsInVzZXJfcGhvbmUiLCJwaG9uZSIsIm1lcmNoYW50X29rX3VybCIsIm1lcmNoYW50X2ZhaWxfdXJsIiwidGltZW91dF9saW1pdCIsInRlc3RfbW9kZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInJlc3VsdCIsImpzb24iLCJzdGF0dXMiLCJ0b2tlbiIsImlmcmFtZVVybCIsImNvbnNvbGUiLCJlcnJvciIsInJlYXNvbiIsInZlcmlmeVBheVRSQ2FsbGJhY2siLCJ0b3RhbEFtb3VudCIsImhhc2giLCJleHBlY3RlZEhhc2giLCJwcm9jZXNzUGF5VFJDYWxsYmFjayIsImZhaWxlZFJlYXNvbkNvZGUiLCJmYWlsZWRSZWFzb25Nc2ciLCJFcnJvciIsImlzU3VjY2VzcyIsInVwZGF0ZURhdGEiLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0YWRhdGEiLCJwYXl0cl9lcnJvcl9jb2RlIiwicGF5dHJfZXJyb3JfbWVzc2FnZSIsImVxIiwic3VjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/paytr.ts\n");

/***/ }),

/***/ "(rsc)/./lib/stripe.ts":
/*!***********************!*\
  !*** ./lib/stripe.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cancelStripeSubscription: () => (/* binding */ cancelStripeSubscription),\n/* harmony export */   createBillingPortalSession: () => (/* binding */ createBillingPortalSession),\n/* harmony export */   createStripeCheckoutSession: () => (/* binding */ createStripeCheckoutSession),\n/* harmony export */   getOrCreateStripeCustomer: () => (/* binding */ getOrCreateStripeCustomer),\n/* harmony export */   getStripeSubscription: () => (/* binding */ getStripeSubscription),\n/* harmony export */   refundStripePayment: () => (/* binding */ refundStripePayment),\n/* harmony export */   resumeStripeSubscription: () => (/* binding */ resumeStripeSubscription),\n/* harmony export */   stripe: () => (/* binding */ stripe),\n/* harmony export */   verifyStripeWebhook: () => (/* binding */ verifyStripeWebhook)\n/* harmony export */ });\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stripe */ \"(rsc)/./node_modules/stripe/esm/stripe.esm.node.js\");\n/* harmony import */ var _supabase_admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./supabase/admin */ \"(rsc)/./lib/supabase/admin.ts\");\n\n\nconst stripeSecretKey = process.env.STRIPE_SECRET_KEY;\nconst stripe = new stripe__WEBPACK_IMPORTED_MODULE_0__[\"default\"](stripeSecretKey, {\n    apiVersion: \"2024-12-18.acacia\",\n    typescript: true\n});\nasync function getOrCreateStripeCustomer(customerId, email, name) {\n    const { data: customer } = await _supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"customers\").select(\"stripe_customer_id\").eq(\"id\", customerId).single();\n    if (customer?.stripe_customer_id) {\n        return customer.stripe_customer_id;\n    }\n    const stripeCustomer = await stripe.customers.create({\n        email,\n        name,\n        metadata: {\n            supabase_customer_id: customerId\n        }\n    });\n    await _supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"customers\").update({\n        stripe_customer_id: stripeCustomer.id\n    }).eq(\"id\", customerId);\n    return stripeCustomer.id;\n}\nasync function createStripeCheckoutSession(params) {\n    const { product, customerEmail, customerId, successUrl, cancelUrl, metadata } = params;\n    let stripeCustomerId;\n    if (customerId) {\n        stripeCustomerId = await getOrCreateStripeCustomer(customerId, customerEmail);\n    }\n    const session = await stripe.checkout.sessions.create({\n        mode: product.type === \"subscription\" ? \"subscription\" : \"payment\",\n        customer: stripeCustomerId,\n        customer_email: stripeCustomerId ? undefined : customerEmail,\n        line_items: [\n            {\n                price_data: {\n                    currency: product.currency.toLowerCase(),\n                    product_data: {\n                        name: product.name,\n                        description: product.description || undefined,\n                        images: product.image_url ? [\n                            product.image_url\n                        ] : undefined\n                    },\n                    unit_amount: Math.round(product.price * 100),\n                    recurring: product.type === \"subscription\" ? {\n                        interval: product.billing_period === \"yearly\" ? \"year\" : \"month\"\n                    } : undefined\n                },\n                quantity: 1\n            }\n        ],\n        success_url: `${successUrl}?session_id={CHECKOUT_SESSION_ID}`,\n        cancel_url: cancelUrl,\n        metadata: {\n            product_id: product.id,\n            customer_id: customerId || \"\",\n            ...metadata\n        },\n        payment_intent_data: product.type === \"one_time\" ? {\n            metadata: {\n                product_id: product.id,\n                customer_id: customerId || \"\"\n            }\n        } : undefined,\n        subscription_data: product.type === \"subscription\" ? {\n            metadata: {\n                product_id: product.id,\n                customer_id: customerId || \"\"\n            }\n        } : undefined\n    });\n    return {\n        sessionId: session.id,\n        url: session.url\n    };\n}\nasync function createBillingPortalSession(stripeCustomerId, returnUrl) {\n    const session = await stripe.billingPortal.sessions.create({\n        customer: stripeCustomerId,\n        return_url: returnUrl\n    });\n    return session.url;\n}\nasync function cancelStripeSubscription(stripeSubscriptionId, immediate = false) {\n    if (immediate) {\n        return await stripe.subscriptions.cancel(stripeSubscriptionId);\n    }\n    return await stripe.subscriptions.update(stripeSubscriptionId, {\n        cancel_at_period_end: true\n    });\n}\nasync function resumeStripeSubscription(stripeSubscriptionId) {\n    return await stripe.subscriptions.update(stripeSubscriptionId, {\n        cancel_at_period_end: false\n    });\n}\nasync function getStripeSubscription(stripeSubscriptionId) {\n    return await stripe.subscriptions.retrieve(stripeSubscriptionId);\n}\nasync function refundStripePayment(paymentIntentId, amount) {\n    return await stripe.refunds.create({\n        payment_intent: paymentIntentId,\n        amount: amount ? Math.round(amount * 100) : undefined\n    });\n}\nfunction verifyStripeWebhook(payload, signature) {\n    const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET;\n    return stripe.webhooks.constructEvent(payload, signature, webhookSecret);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZTMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdHJpcGUgZnJvbSAnc3RyaXBlJztcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICcuL3N1cGFiYXNlL2FkbWluJztcbmltcG9ydCB0eXBlIHsgUHJvZHVjdCB9IGZyb20gJ0AvdHlwZXMnO1xuXG5jb25zdCBzdHJpcGVTZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSE7XG5cbmV4cG9ydCBjb25zdCBzdHJpcGUgPSBuZXcgU3RyaXBlKHN0cmlwZVNlY3JldEtleSwge1xuICBhcGlWZXJzaW9uOiAnMjAyNC0xMi0xOC5hY2FjaWEnLFxuICB0eXBlc2NyaXB0OiB0cnVlLFxufSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVN0cmlwZUN1c3RvbWVyKFxuICBjdXN0b21lcklkOiBzdHJpbmcsXG4gIGVtYWlsOiBzdHJpbmcsXG4gIG5hbWU/OiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHsgZGF0YTogY3VzdG9tZXIgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAuZnJvbSgnY3VzdG9tZXJzJylcbiAgICAuc2VsZWN0KCdzdHJpcGVfY3VzdG9tZXJfaWQnKVxuICAgIC5lcSgnaWQnLCBjdXN0b21lcklkKVxuICAgIC5zaW5nbGUoKTtcblxuICBpZiAoY3VzdG9tZXI/LnN0cmlwZV9jdXN0b21lcl9pZCkge1xuICAgIHJldHVybiBjdXN0b21lci5zdHJpcGVfY3VzdG9tZXJfaWQ7XG4gIH1cblxuICBjb25zdCBzdHJpcGVDdXN0b21lciA9IGF3YWl0IHN0cmlwZS5jdXN0b21lcnMuY3JlYXRlKHtcbiAgICBlbWFpbCxcbiAgICBuYW1lLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBzdXBhYmFzZV9jdXN0b21lcl9pZDogY3VzdG9tZXJJZCxcbiAgICB9LFxuICB9KTtcblxuICBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgLmZyb20oJ2N1c3RvbWVycycpXG4gICAgLnVwZGF0ZSh7IHN0cmlwZV9jdXN0b21lcl9pZDogc3RyaXBlQ3VzdG9tZXIuaWQgfSlcbiAgICAuZXEoJ2lkJywgY3VzdG9tZXJJZCk7XG5cbiAgcmV0dXJuIHN0cmlwZUN1c3RvbWVyLmlkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU3RyaXBlQ2hlY2tvdXRTZXNzaW9uKHBhcmFtczoge1xuICBwcm9kdWN0OiBQcm9kdWN0O1xuICBjdXN0b21lckVtYWlsOiBzdHJpbmc7XG4gIGN1c3RvbWVySWQ/OiBzdHJpbmc7XG4gIHN1Y2Nlc3NVcmw6IHN0cmluZztcbiAgY2FuY2VsVXJsOiBzdHJpbmc7XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn0pOiBQcm9taXNlPHsgc2Vzc2lvbklkOiBzdHJpbmc7IHVybDogc3RyaW5nIH0+IHtcbiAgY29uc3QgeyBwcm9kdWN0LCBjdXN0b21lckVtYWlsLCBjdXN0b21lcklkLCBzdWNjZXNzVXJsLCBjYW5jZWxVcmwsIG1ldGFkYXRhIH0gPVxuICAgIHBhcmFtcztcblxuICBsZXQgc3RyaXBlQ3VzdG9tZXJJZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBpZiAoY3VzdG9tZXJJZCkge1xuICAgIHN0cmlwZUN1c3RvbWVySWQgPSBhd2FpdCBnZXRPckNyZWF0ZVN0cmlwZUN1c3RvbWVyKFxuICAgICAgY3VzdG9tZXJJZCxcbiAgICAgIGN1c3RvbWVyRW1haWxcbiAgICApO1xuICB9XG5cbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xuICAgIG1vZGU6IHByb2R1Y3QudHlwZSA9PT0gJ3N1YnNjcmlwdGlvbicgPyAnc3Vic2NyaXB0aW9uJyA6ICdwYXltZW50JyxcbiAgICBjdXN0b21lcjogc3RyaXBlQ3VzdG9tZXJJZCxcbiAgICBjdXN0b21lcl9lbWFpbDogc3RyaXBlQ3VzdG9tZXJJZCA/IHVuZGVmaW5lZCA6IGN1c3RvbWVyRW1haWwsXG4gICAgbGluZV9pdGVtczogW1xuICAgICAge1xuICAgICAgICBwcmljZV9kYXRhOiB7XG4gICAgICAgICAgY3VycmVuY3k6IHByb2R1Y3QuY3VycmVuY3kudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBwcm9kdWN0X2RhdGE6IHtcbiAgICAgICAgICAgIG5hbWU6IHByb2R1Y3QubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwcm9kdWN0LmRlc2NyaXB0aW9uIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGltYWdlczogcHJvZHVjdC5pbWFnZV91cmwgPyBbcHJvZHVjdC5pbWFnZV91cmxdIDogdW5kZWZpbmVkLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdW5pdF9hbW91bnQ6IE1hdGgucm91bmQocHJvZHVjdC5wcmljZSAqIDEwMCksXG4gICAgICAgICAgcmVjdXJyaW5nOlxuICAgICAgICAgICAgcHJvZHVjdC50eXBlID09PSAnc3Vic2NyaXB0aW9uJ1xuICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIGludGVydmFsOlxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LmJpbGxpbmdfcGVyaW9kID09PSAneWVhcmx5JyA/ICd5ZWFyJyA6ICdtb250aCcsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICB9LFxuICAgIF0sXG4gICAgc3VjY2Vzc191cmw6IGAke3N1Y2Nlc3NVcmx9P3Nlc3Npb25faWQ9e0NIRUNLT1VUX1NFU1NJT05fSUR9YCxcbiAgICBjYW5jZWxfdXJsOiBjYW5jZWxVcmwsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3QuaWQsXG4gICAgICBjdXN0b21lcl9pZDogY3VzdG9tZXJJZCB8fCAnJyxcbiAgICAgIC4uLm1ldGFkYXRhLFxuICAgIH0sXG4gICAgcGF5bWVudF9pbnRlbnRfZGF0YTpcbiAgICAgIHByb2R1Y3QudHlwZSA9PT0gJ29uZV90aW1lJ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3QuaWQsXG4gICAgICAgICAgICAgIGN1c3RvbWVyX2lkOiBjdXN0b21lcklkIHx8ICcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIHN1YnNjcmlwdGlvbl9kYXRhOlxuICAgICAgcHJvZHVjdC50eXBlID09PSAnc3Vic2NyaXB0aW9uJ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3QuaWQsXG4gICAgICAgICAgICAgIGN1c3RvbWVyX2lkOiBjdXN0b21lcklkIHx8ICcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHNlc3Npb25JZDogc2Vzc2lvbi5pZCxcbiAgICB1cmw6IHNlc3Npb24udXJsISxcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJpbGxpbmdQb3J0YWxTZXNzaW9uKFxuICBzdHJpcGVDdXN0b21lcklkOiBzdHJpbmcsXG4gIHJldHVyblVybDogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc3RyaXBlLmJpbGxpbmdQb3J0YWwuc2Vzc2lvbnMuY3JlYXRlKHtcbiAgICBjdXN0b21lcjogc3RyaXBlQ3VzdG9tZXJJZCxcbiAgICByZXR1cm5fdXJsOiByZXR1cm5VcmwsXG4gIH0pO1xuXG4gIHJldHVybiBzZXNzaW9uLnVybDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbmNlbFN0cmlwZVN1YnNjcmlwdGlvbihcbiAgc3RyaXBlU3Vic2NyaXB0aW9uSWQ6IHN0cmluZyxcbiAgaW1tZWRpYXRlOiBib29sZWFuID0gZmFsc2Vcbik6IFByb21pc2U8U3RyaXBlLlN1YnNjcmlwdGlvbj4ge1xuICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHN0cmlwZS5zdWJzY3JpcHRpb25zLmNhbmNlbChzdHJpcGVTdWJzY3JpcHRpb25JZCk7XG4gIH1cblxuICByZXR1cm4gYXdhaXQgc3RyaXBlLnN1YnNjcmlwdGlvbnMudXBkYXRlKHN0cmlwZVN1YnNjcmlwdGlvbklkLCB7XG4gICAgY2FuY2VsX2F0X3BlcmlvZF9lbmQ6IHRydWUsXG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzdW1lU3RyaXBlU3Vic2NyaXB0aW9uKFxuICBzdHJpcGVTdWJzY3JpcHRpb25JZDogc3RyaW5nXG4pOiBQcm9taXNlPFN0cmlwZS5TdWJzY3JpcHRpb24+IHtcbiAgcmV0dXJuIGF3YWl0IHN0cmlwZS5zdWJzY3JpcHRpb25zLnVwZGF0ZShzdHJpcGVTdWJzY3JpcHRpb25JZCwge1xuICAgIGNhbmNlbF9hdF9wZXJpb2RfZW5kOiBmYWxzZSxcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdHJpcGVTdWJzY3JpcHRpb24oXG4gIHN0cmlwZVN1YnNjcmlwdGlvbklkOiBzdHJpbmdcbik6IFByb21pc2U8U3RyaXBlLlN1YnNjcmlwdGlvbj4ge1xuICByZXR1cm4gYXdhaXQgc3RyaXBlLnN1YnNjcmlwdGlvbnMucmV0cmlldmUoc3RyaXBlU3Vic2NyaXB0aW9uSWQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmdW5kU3RyaXBlUGF5bWVudChcbiAgcGF5bWVudEludGVudElkOiBzdHJpbmcsXG4gIGFtb3VudD86IG51bWJlclxuKTogUHJvbWlzZTxTdHJpcGUuUmVmdW5kPiB7XG4gIHJldHVybiBhd2FpdCBzdHJpcGUucmVmdW5kcy5jcmVhdGUoe1xuICAgIHBheW1lbnRfaW50ZW50OiBwYXltZW50SW50ZW50SWQsXG4gICAgYW1vdW50OiBhbW91bnQgPyBNYXRoLnJvdW5kKGFtb3VudCAqIDEwMCkgOiB1bmRlZmluZWQsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5U3RyaXBlV2ViaG9vayhcbiAgcGF5bG9hZDogc3RyaW5nIHwgQnVmZmVyLFxuICBzaWduYXR1cmU6IHN0cmluZ1xuKTogU3RyaXBlLkV2ZW50IHtcbiAgY29uc3Qgd2ViaG9va1NlY3JldCA9IHByb2Nlc3MuZW52LlNUUklQRV9XRUJIT09LX1NFQ1JFVCE7XG4gIHJldHVybiBzdHJpcGUud2ViaG9va3MuY29uc3RydWN0RXZlbnQocGF5bG9hZCwgc2lnbmF0dXJlLCB3ZWJob29rU2VjcmV0KTtcbn1cclxuIl0sIm5hbWVzIjpbIlN0cmlwZSIsInN1cGFiYXNlQWRtaW4iLCJzdHJpcGVTZWNyZXRLZXkiLCJwcm9jZXNzIiwiZW52IiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJzdHJpcGUiLCJhcGlWZXJzaW9uIiwidHlwZXNjcmlwdCIsImdldE9yQ3JlYXRlU3RyaXBlQ3VzdG9tZXIiLCJjdXN0b21lcklkIiwiZW1haWwiLCJuYW1lIiwiZGF0YSIsImN1c3RvbWVyIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwic3RyaXBlX2N1c3RvbWVyX2lkIiwic3RyaXBlQ3VzdG9tZXIiLCJjdXN0b21lcnMiLCJjcmVhdGUiLCJtZXRhZGF0YSIsInN1cGFiYXNlX2N1c3RvbWVyX2lkIiwidXBkYXRlIiwiaWQiLCJjcmVhdGVTdHJpcGVDaGVja291dFNlc3Npb24iLCJwYXJhbXMiLCJwcm9kdWN0IiwiY3VzdG9tZXJFbWFpbCIsInN1Y2Nlc3NVcmwiLCJjYW5jZWxVcmwiLCJzdHJpcGVDdXN0b21lcklkIiwic2Vzc2lvbiIsImNoZWNrb3V0Iiwic2Vzc2lvbnMiLCJtb2RlIiwidHlwZSIsImN1c3RvbWVyX2VtYWlsIiwidW5kZWZpbmVkIiwibGluZV9pdGVtcyIsInByaWNlX2RhdGEiLCJjdXJyZW5jeSIsInRvTG93ZXJDYXNlIiwicHJvZHVjdF9kYXRhIiwiZGVzY3JpcHRpb24iLCJpbWFnZXMiLCJpbWFnZV91cmwiLCJ1bml0X2Ftb3VudCIsIk1hdGgiLCJyb3VuZCIsInByaWNlIiwicmVjdXJyaW5nIiwiaW50ZXJ2YWwiLCJiaWxsaW5nX3BlcmlvZCIsInF1YW50aXR5Iiwic3VjY2Vzc191cmwiLCJjYW5jZWxfdXJsIiwicHJvZHVjdF9pZCIsImN1c3RvbWVyX2lkIiwicGF5bWVudF9pbnRlbnRfZGF0YSIsInN1YnNjcmlwdGlvbl9kYXRhIiwic2Vzc2lvbklkIiwidXJsIiwiY3JlYXRlQmlsbGluZ1BvcnRhbFNlc3Npb24iLCJyZXR1cm5VcmwiLCJiaWxsaW5nUG9ydGFsIiwicmV0dXJuX3VybCIsImNhbmNlbFN0cmlwZVN1YnNjcmlwdGlvbiIsInN0cmlwZVN1YnNjcmlwdGlvbklkIiwiaW1tZWRpYXRlIiwic3Vic2NyaXB0aW9ucyIsImNhbmNlbCIsImNhbmNlbF9hdF9wZXJpb2RfZW5kIiwicmVzdW1lU3RyaXBlU3Vic2NyaXB0aW9uIiwiZ2V0U3RyaXBlU3Vic2NyaXB0aW9uIiwicmV0cmlldmUiLCJyZWZ1bmRTdHJpcGVQYXltZW50IiwicGF5bWVudEludGVudElkIiwiYW1vdW50IiwicmVmdW5kcyIsInBheW1lbnRfaW50ZW50IiwidmVyaWZ5U3RyaXBlV2ViaG9vayIsInBheWxvYWQiLCJzaWduYXR1cmUiLCJ3ZWJob29rU2VjcmV0IiwiU1RSSVBFX1dFQkhPT0tfU0VDUkVUIiwid2ViaG9va3MiLCJjb25zdHJ1Y3RFdmVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/stripe.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/admin.ts":
/*!*******************************!*\
  !*** ./lib/supabase/admin.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuditLog: () => (/* binding */ createAuditLog),\n/* harmony export */   getSetting: () => (/* binding */ getSetting),\n/* harmony export */   getSettings: () => (/* binding */ getSettings),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin),\n/* harmony export */   updateSetting: () => (/* binding */ updateSetting)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://cxmiphavaltkeyobaptg.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\nasync function getSettings() {\n    const { data, error } = await supabaseAdmin.from(\"settings\").select(\"key, value\");\n    if (error) {\n        console.error(\"Error fetching settings:\", error);\n        return {};\n    }\n    return data.reduce((acc, item)=>{\n        acc[item.key] = item.value || \"\";\n        return acc;\n    }, {});\n}\nasync function getSetting(key) {\n    const { data, error } = await supabaseAdmin.from(\"settings\").select(\"value\").eq(\"key\", key).single();\n    if (error) return null;\n    return data?.value || null;\n}\nasync function updateSetting(key, value) {\n    const { error } = await supabaseAdmin.from(\"settings\").update({\n        value\n    }).eq(\"key\", key);\n    return !error;\n}\nasync function createAuditLog(params) {\n    const oldValue = params.oldValue ?? params.oldValues;\n    const newValue = params.newValue ?? params.newValues;\n    const { error } = await supabaseAdmin.from(\"audit_logs\").insert({\n        admin_id: params.adminId,\n        action: params.action,\n        entity_type: params.entityType,\n        entity_id: params.entityId,\n        old_value: oldValue,\n        new_value: newValue,\n        ip_address: params.ipAddress,\n        user_agent: params.userAgent\n    });\n    if (error) {\n        console.error(\"Error creating audit log:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UvYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXFEO0FBRzlDLE1BQU1DLGdCQUFnQkQsbUVBQVlBLENBQ3ZDRSwwQ0FBb0MsRUFDcENBLFFBQVFDLEdBQUcsQ0FBQ0UseUJBQXlCLEVBQ3JDO0lBQ0VDLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNBO0FBRUssZUFBZUM7SUFDcEIsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1WLGNBQzNCVyxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDO0lBRVYsSUFBSUYsT0FBTztRQUNURyxRQUFRSCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPLENBQUM7SUFDVjtJQUVBLE9BQU9ELEtBQUtLLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQztRQUN2QkQsR0FBRyxDQUFDQyxLQUFLQyxHQUFHLENBQUMsR0FBR0QsS0FBS0UsS0FBSyxJQUFJO1FBQzlCLE9BQU9IO0lBQ1QsR0FBRyxDQUFDO0FBQ047QUFFTyxlQUFlSSxXQUFXRixHQUFXO0lBQzFDLE1BQU0sRUFBRVIsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNVixjQUMzQlcsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxTQUNQUSxFQUFFLENBQUMsT0FBT0gsS0FDVkksTUFBTTtJQUVULElBQUlYLE9BQU8sT0FBTztJQUNsQixPQUFPRCxNQUFNUyxTQUFTO0FBQ3hCO0FBRU8sZUFBZUksY0FBY0wsR0FBVyxFQUFFQyxLQUFhO0lBQzVELE1BQU0sRUFBRVIsS0FBSyxFQUFFLEdBQUcsTUFBTVYsY0FDckJXLElBQUksQ0FBQyxZQUNMWSxNQUFNLENBQUM7UUFBRUw7SUFBTSxHQUNmRSxFQUFFLENBQUMsT0FBT0g7SUFFYixPQUFPLENBQUNQO0FBQ1Y7QUFFTyxlQUFlYyxlQUFlQyxNQVdwQztJQUNDLE1BQU1DLFdBQVdELE9BQU9DLFFBQVEsSUFBSUQsT0FBT0UsU0FBUztJQUNwRCxNQUFNQyxXQUFXSCxPQUFPRyxRQUFRLElBQUlILE9BQU9JLFNBQVM7SUFDcEQsTUFBTSxFQUFFbkIsS0FBSyxFQUFFLEdBQUcsTUFBTVYsY0FBY1csSUFBSSxDQUFDLGNBQWNtQixNQUFNLENBQUM7UUFDOURDLFVBQVVOLE9BQU9PLE9BQU87UUFDeEJDLFFBQVFSLE9BQU9RLE1BQU07UUFDckJDLGFBQWFULE9BQU9VLFVBQVU7UUFDOUJDLFdBQVdYLE9BQU9ZLFFBQVE7UUFDMUJDLFdBQVdaO1FBQ1hhLFdBQVdYO1FBQ1hZLFlBQVlmLE9BQU9nQixTQUFTO1FBQzVCQyxZQUFZakIsT0FBT2tCLFNBQVM7SUFDOUI7SUFFQSxJQUFJakMsT0FBTztRQUNURyxRQUFRSCxLQUFLLENBQUMsNkJBQTZCQTtJQUM3QztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uZWxpeGEvLi9saWIvc3VwYWJhc2UvYWRtaW4udHM/ODE2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgdHlwZSB7IFNldHRpbmdzTWFwIH0gZnJvbSAnQC90eXBlcyc7XHJcblxyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhLFxyXG4gIHtcclxuICAgIGF1dGg6IHtcclxuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcclxuICAgIH0sXHJcbiAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNldHRpbmdzKCk6IFByb21pc2U8U2V0dGluZ3NNYXA+IHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAuZnJvbSgnc2V0dGluZ3MnKVxyXG4gICAgLnNlbGVjdCgna2V5LCB2YWx1ZScpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHNldHRpbmdzOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7fTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkYXRhLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XHJcbiAgICBhY2NbaXRlbS5rZXldID0gaXRlbS52YWx1ZSB8fCAnJztcclxuICAgIHJldHVybiBhY2M7XHJcbiAgfSwge30gYXMgU2V0dGluZ3NNYXApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2V0dGluZyhrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgIC5mcm9tKCdzZXR0aW5ncycpXHJcbiAgICAuc2VsZWN0KCd2YWx1ZScpXHJcbiAgICAuZXEoJ2tleScsIGtleSlcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4gZGF0YT8udmFsdWUgfHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNldHRpbmcoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAuZnJvbSgnc2V0dGluZ3MnKVxyXG4gICAgLnVwZGF0ZSh7IHZhbHVlIH0pXHJcbiAgICAuZXEoJ2tleScsIGtleSk7XHJcblxyXG4gIHJldHVybiAhZXJyb3I7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBdWRpdExvZyhwYXJhbXM6IHtcclxuICBhZG1pbklkOiBzdHJpbmc7XHJcbiAgYWN0aW9uOiBzdHJpbmc7XHJcbiAgZW50aXR5VHlwZT86IHN0cmluZztcclxuICBlbnRpdHlJZD86IHN0cmluZztcclxuICBvbGRWYWx1ZT86IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbiAgbmV3VmFsdWU/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG4gIG9sZFZhbHVlcz86IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbiAgbmV3VmFsdWVzPzogUmVjb3JkPHN0cmluZywgYW55PjtcclxuICBpcEFkZHJlc3M/OiBzdHJpbmc7XHJcbiAgdXNlckFnZW50Pzogc3RyaW5nO1xyXG59KSB7XHJcbiAgY29uc3Qgb2xkVmFsdWUgPSBwYXJhbXMub2xkVmFsdWUgPz8gcGFyYW1zLm9sZFZhbHVlcztcclxuICBjb25zdCBuZXdWYWx1ZSA9IHBhcmFtcy5uZXdWYWx1ZSA/PyBwYXJhbXMubmV3VmFsdWVzO1xyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uZnJvbSgnYXVkaXRfbG9ncycpLmluc2VydCh7XHJcbiAgICBhZG1pbl9pZDogcGFyYW1zLmFkbWluSWQsXHJcbiAgICBhY3Rpb246IHBhcmFtcy5hY3Rpb24sXHJcbiAgICBlbnRpdHlfdHlwZTogcGFyYW1zLmVudGl0eVR5cGUsXHJcbiAgICBlbnRpdHlfaWQ6IHBhcmFtcy5lbnRpdHlJZCxcclxuICAgIG9sZF92YWx1ZTogb2xkVmFsdWUsXHJcbiAgICBuZXdfdmFsdWU6IG5ld1ZhbHVlLFxyXG4gICAgaXBfYWRkcmVzczogcGFyYW1zLmlwQWRkcmVzcyxcclxuICAgIHVzZXJfYWdlbnQ6IHBhcmFtcy51c2VyQWdlbnQsXHJcbiAgfSk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYXVkaXQgbG9nOicsIGVycm9yKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJnZXRTZXR0aW5ncyIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJjb25zb2xlIiwicmVkdWNlIiwiYWNjIiwiaXRlbSIsImtleSIsInZhbHVlIiwiZ2V0U2V0dGluZyIsImVxIiwic2luZ2xlIiwidXBkYXRlU2V0dGluZyIsInVwZGF0ZSIsImNyZWF0ZUF1ZGl0TG9nIiwicGFyYW1zIiwib2xkVmFsdWUiLCJvbGRWYWx1ZXMiLCJuZXdWYWx1ZSIsIm5ld1ZhbHVlcyIsImluc2VydCIsImFkbWluX2lkIiwiYWRtaW5JZCIsImFjdGlvbiIsImVudGl0eV90eXBlIiwiZW50aXR5VHlwZSIsImVudGl0eV9pZCIsImVudGl0eUlkIiwib2xkX3ZhbHVlIiwibmV3X3ZhbHVlIiwiaXBfYWRkcmVzcyIsImlwQWRkcmVzcyIsInVzZXJfYWdlbnQiLCJ1c2VyQWdlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/admin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/stripe","vendor-chunks/qs","vendor-chunks/object-inspect","vendor-chunks/get-intrinsic","vendor-chunks/side-channel-list","vendor-chunks/side-channel-weakmap","vendor-chunks/has-symbols","vendor-chunks/function-bind","vendor-chunks/side-channel-map","vendor-chunks/side-channel","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/call-bound","vendor-chunks/es-errors","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Fstripe%2Froute&page=%2Fapi%2Fcheckout%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSonat%5CDocuments%5CVS-CODE-PROJECTS%5CPAY-STRUCTURE-ALL%5CPAY-STRUCTURE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();